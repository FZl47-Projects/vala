{% extends 'dashboard/base/base_template.html' %}
{% load static %}
{% load render_partial %}

{% block Title %}
    اطلاعات شخصی - {{ user.get_full_name }}
{% endblock %}

{% block Link %}
    <link href="{% static 'template/dashboard/vendor/jquery-nice-select/css/nice-select.css' %}" rel="stylesheet">
    <link href="{% static 'template/dashboard/vendor/jquery-smartwizard/dist/css/smart_wizard.css' %}" rel="stylesheet">
{% endblock %}


{% block Style %}
    <style>

        .image-hide {
            visibility: hidden;
            opacity: 0;
        }

        .image-show {
            transform: translateY(20px);
            animation: imageShowAnimation 2s forwards;
        }

        @keyframes imageShowAnimation {
            100% {
                opacity: 1;
                visibility: visible;
                transform: translateY(0);
            }
        }

        .drop-container {
            position: relative;
            display: flex;
            gap: 10px;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            border-radius: 10px;
            border: 2px dashed #555;
            color: #444;
            cursor: pointer;
            transition: background .2s ease-in-out, border .2s ease-in-out;
        }

        .drop-container:hover,
        .drop-container.drag-active {
            background: #eee;
            border-color: #111;
        }

        .drop-container:hover .drop-title,
        .drop-container.drag-active .drop-title {
            color: #222;
        }

        .drop-title {
            color: #444;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            transition: color .2s ease-in-out;
        }

        input[type=file] {
            width: 350px;
            max-width: 100%;
            color: #444;
            padding: 5px;
            background: #fff;
            border-radius: 10px;
            border: 1px solid #555;
        }

        input[type=file]::file-selector-button {
            margin-right: 20px;
            border: none;
            background: #084cdf;
            padding: 10px 20px;
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            transition: background .2s ease-in-out;
        }

        input[type=file]::file-selector-button:hover {
            background: #0d45a5;
        }
    </style>
{% endblock %}

{% block Content %}
    <div id="main-wrapper">
        {% include 'dashboard/components/base/header.html' %}
        {% render_partial 'apps.dashboard.components.views.DashboardMenu' %}
        {% render_partial 'apps.account.components.views.DashboardUserPersonalDetail' %}
        {% include 'dashboard/components/base/footer.html' %}
    </div>
{% endblock %}

{% block Script %}
    <script src="{% static 'template/dashboard/vendor/jquery-steps/build/jquery.steps.min.js' %}"></script>
    <script src="{% static 'template/dashboard/vendor/jquery-validation/jquery.validate.min.js' %}"></script>
    <script src="{% static 'template/dashboard/js/plugins-init/jquery.validate-init.js' %}"></script>
    <script src="{% static 'template/dashboard/vendor/jquery-smartwizard/dist/js/jquery.smartWizard.js' %}"></script>
    <script>$(document).ready(function () {
        $('#smartwizard').smartWizard();
    });

    const dropContainer = document.getElementById("dropcontainer")
    const imageInput = document.getElementById("images")

    dropContainer.addEventListener("dragover", (e) => {
        // prevent default to allow drop
        e.preventDefault()
    }, false)

    dropContainer.addEventListener("dragenter", () => {
        dropContainer.classList.add("drag-active")
    })

    dropContainer.addEventListener("dragleave", () => {
        dropContainer.classList.remove("drag-active")
    })

    dropContainer.addEventListener("drop", (e) => {
        e.preventDefault()
        dropContainer.classList.remove("drag-active")
        imageInput.files = e.dataTransfer.files
    })

    const previewImage = document.getElementById('previewImage');

    function previewSelectedImage() {
        const file = imageInput.files[0];
        if (file) {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = function (e) {
                previewImage.src = e.target.result;
                previewImage.classList.remove('image-hide')
                previewImage.classList.add('image-show')
                // picture header
                document.querySelector('.header-profile img').src = e.target.result
            }
        } else {
            previewImage.classList.add('image-hide')
            previewImage.classList.remove('image-show')
        }
    }

    imageInput.addEventListener('change', previewSelectedImage);


    let form_personal_detail = document.querySelector('#form-personal-detail')
    form_personal_detail.querySelector('button[type="submit"]').addEventListener('click', function () {
        if (!form_personal_detail.checkValidity()) {
            createNotify(
                {
                    title: 'اخطار',
                    message: 'لطفا فیلد های دارای علامت * را پرنمایید',
                    theme: 'error',
                }
            )
        }
    })

    </script>
{% endblock %}


